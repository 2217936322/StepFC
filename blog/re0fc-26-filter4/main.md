### 更多的算法
还有非常多的算法, 光维基那种对照图就还有LQx和xBR系列, 有机会的话再介绍吧.

下面就是音频的部分了, 不过再介绍滤波器之前, 先讨论一个问题, 我们加入这些额外处理部分是为了提升用户体验程度. 与视频部分不同的是, 我们能拿到音频更基础的信息. 就像第一个音频播放状态机一样, 我们能知道音频在某一刻的信息.

那我们能不能根据这些提高音质呢?

### 方波
这个没什么好说的, 不是0就是1.

### 三角波
这个就有的说了, 从之前的实现我们知道: FC的三角波实际上是一个伪三角波, 从0到15, 即一个深度是4bit的三角波. 我们可以通过额外的处理来加深三角波的深度.

那么问题来了, "音质"提高了吗? 我们简单测试一下, 我们可以简单地生成一个三角波
```c
void make_triwave() {
    uint8_t buf[LEN];
    for (uint16_t i = 0; i != LEN2; ++i)
        buf[i] = i;
    for (uint16_t i = 0; i != LEN2; ++i)
        buf[i + LEN2] = LEN2 - i - 1;
}
```

这样生成了6bit深度和4bit深度的三角波

![4bittri](./4bittri.png)

听起来怎么样? 差不多...4bit的听起来像叠加了一个高频的噪音, 6bit的听起来像叠加了一个较低的噪音. 不过, 毕竟只有正弦波听起来才没有叠加其他声音.

那么, "音质"提高了吗? 理论上, 你完全可以把三角波替换成钢琴音, 让模拟器发出钢琴的声音, 不过这完全是两个不同的东西!

![piano](./piano.jpg)


FC的伪三角波也一样, 和真正的三角波不是同一个东西, 我们当然可以提高三角波的深度尽可能逼近真正的三角波, 不过, 最好是通过额外的选项提供给用户.

那么, 深度最高是多少? 在44.1kHz采样率下, 假如以44.1Hz作为基本的最低频率, 也就是1000个样本, 目前是32个. 也就是说如果把序列再放大32倍, 就能在44.1kHz下获得相当好的三角波(浮点实现的话就无视吧, 直接插值即可).


### 噪音
噪声声道可以提高"音质"吗? 理论上可行, 因为之前了解到噪音实际上只有32种音色, 我们完全可以去找32种音质更好的样本即可. 

当然还有的方法是再发明一个伪随机算法, 不过难度很高.

### DMC
DMC声道呢, DMC用来播放样本数据, 我们不可能无成本的增加信息, 能做的最多就是降降噪什么的. 不过由于ΔPCM的特殊性, 只有1bit的Δ编码, 自己猜测应该可能通过样本分析, 还原出更好的PCM样本.


### 其他
方波虽然只有0和1, 但是通过一些手段还是能生成很不错的声音. 包络生成器, 扫描单元.

我们可以通过对ADSR的模拟让声音听起来更加自然点, 即ADSR包络模拟. 还有就是更加平滑的频率扫描.

目前的实现是: 处理上一个事件. 那么, 这个方式最大的好处就是, 我们模拟ADSR包络, 平滑扫描更加方便.